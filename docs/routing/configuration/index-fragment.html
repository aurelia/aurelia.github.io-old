<section class="article">
  <header>
    <h1>Router Configuration</h1>
    <h2>This article covers Aurelia&#x27;s router configuration.</h2>
  </header>

  <article class="markdown">
    <section><h2 id="basic-configuration">Basic Configuration</h2><p>To use Aurelia's router, your component view must have a <code>&lt;router-view&gt;&lt;/router-view&gt;</code> element. In order to configure the router, the component's view-model requires a <code>configureRouter()</code> function.</p>
<code-listing heading="app.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">repeat.for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav of router.navigation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${nav.isActive ? <span class="token punctuation">'</span>active<span class="token punctuation">'</span> : <span class="token punctuation">'</span><span class="token punctuation">'</span>}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href.bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav.href<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>${nav.title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="Basic Route Configuration">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>       moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users/:id/detail'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'userDetail'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/detail'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'files/*path'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'files'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'files/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    title<span class="token punctuation">:</span> <span class="token string">'Files'</span><span class="token punctuation">,</span> href<span class="token punctuation">:</span><span class="token string">'#files'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>       moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users/:id/detail'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'userDetail'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/detail'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'files/*path'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'files'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'files/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    title<span class="token punctuation">:</span> <span class="token string">'Files'</span><span class="token punctuation">,</span> href<span class="token punctuation">:</span><span class="token string">'#files'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<ul>
<li><code>config.map()</code> adds route(s) to the router. Although only <code>route</code>, <code>name</code>, <code>moduleId</code>, <code>href</code> and <code>nav</code> are shown above there are other properties that can be included in a route. The interface name for a route is <code>RouteConfig</code>. You can also use <code>config.mapRoute()</code> to add a single route.</li>
<li><code>route</code> - is the pattern to match against incoming URL fragments. It can be a string or array of strings. The route can contain parameterized routes or wildcards as well.
<ul>
<li>Parameterized routes match against a string with a <code>:token</code> parameter (ie: 'users/:id/detail'). An object with the token parameter's name is set as property and passed as a parameter to the route view-model's <code>activate()</code> function.</li>
<li>A parameter can be made optional by appending a question mark <code>:token?</code> (ie: <code>users/:id?/detail</code> would match both <code>users/3/detail</code> and <code>users/detail</code>). When an optional parameter is missing from the url, the property passed to <code>activate()</code> is <code>undefined</code>.</li>
<li>Wildcard routes are used to match the &quot;rest&quot; of a path (ie: files/*path matches files/new/doc or files/temp). An object with the rest of the URL after the segment is set as the <code>path</code> property and passed as a parameter to <code>activate()</code> as well.</li>
</ul>
</li>
<li><code>href</code> - is a conditionally optional property. If it is not defined then route is used. If route has segments then href is required as in the case of files because the router does not know how to fill out the parameterized portions of the pattern.</li>
<li><code>nav</code> - is a boolean or number property. When set to true the route will be included in the router's navigation model. When specified as number, the value will be used in sorting the routes. This makes it easier to create a dynamic menu or similar elements.  The navigation model will be available as array of <code>NavModel</code> in <code>router.navigation</code>. These are the available properties in <code>NavModel</code>:
<ul>
<li><code>isActive</code> flag which will be true when the associated route is active.</li>
<li><code>title</code> which will be prepended in html title when the associated route is active.</li>
<li><code>href</code> can be used on <code>a</code> tag.</li>
<li><code>config</code> is the object defined in <code>config.map</code>.</li>
<li><code>settings</code> is equal to the property <code>settings</code> of <code>config</code> object.</li>
<li><code>router</code> is a reference for AppRouter.</li>
<li>Other properties includes <code>relativeHref</code> and <code>order</code>.</li>
</ul>
</li>
</ul>
<h3>Navigation States</h3>
<p>The router contains a number of additional properties that indicate the current status of router navigation. These properties are only set on the base router, i.e. not in child routers. Additionally, these properties are all with respect to browser history which extends past the lifecycle of the router itself.</p>
<ul>
<li><code>router.isNavigating</code>: <code>true</code> if the router is currently processing a navigation.</li>
<li><code>router.isNavigatingFirst</code>: <code>true</code> if the router is navigating into the app for the first time in the browser session.</li>
<li><code>router.isNavigatingNew</code>: <code>true</code> if the router is navigating to a page instance not in the browser session history. This is triggered when the user clicks a link or the navigate function is called explicitly.</li>
<li><code>router.isNavigatingForward</code>: <code>true</code> if the router is navigating forward in the browser session history. This is triggered when the user clicks the forward button in their browser.</li>
<li><code>router.isNavigatingBack</code>: <code>true</code> if the router is navigating back in the browser session history. This is triggered when the user clicks the back button in their browser or when the <code>navigateBack()</code> function is called.</li>
<li><code>router.isNavigatingRefresh</code>: <code>true</code> if the router is navigating due to a browser refresh.</li>
<li><code>router.isExplicitNavigation</code>: <code>true</code> if the router is navigating due to explicit call to navigate function(s).</li>
<li><code>router.isExplicitNavigationBack</code>: <code>true</code> if the router is navigating due to explicit call to navigateBack function.</li>
</ul>
</section>
<section><h2 id="options">Options</h2><h3>Push State</h3>
<p>Set <code>config.options.pushState</code> to <code>true</code> to activate push state and add 
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base" target="_blank">a base tag</a>
 to the head of your html document. If you're using JSPM, RequireJS or a similar module loader, you will also need to configure it with a base url, corresponding to your base tag's <code>href</code>. Finally, be sure to set the <code>config.options.root</code> to match your base tag's setting.</p>
<code-listing heading="Push State">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>options<span class="token punctuation">.</span>pushState <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>options<span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>options<span class="token punctuation">.</span>pushState <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>options<span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<div class="warning"><div class="icon"> <i></i> </div><p>
PushState requires server-side support. Don't forget to configure your server appropriately.</p>
</div>
</section>
<section><h2 id="dynamically-specify-route-components">Dynamically Specify Route Components</h2><p>You can add a <code>navigationStrategy</code> to a route to allow dynamic routes. Within the navigation strategy Aurelia requires you to configure <code>instruction.config</code> with the desired <code>moduleId</code>, <code>viewPorts</code> or <code>redirect</code>.</p>
<code-listing heading="Using a Route Navigation Strategy">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> navStrat <span class="token operator">=</span> <span class="token punctuation">(</span>instruction<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          instruction<span class="token punctuation">.</span>config<span class="token punctuation">.</span>moduleId <span class="token operator">=</span> instruction<span class="token punctuation">.</span>fragment
          instruction<span class="token punctuation">.</span>config<span class="token punctuation">.</span>href <span class="token operator">=</span> instruction<span class="token punctuation">.</span>fragment
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'admin*path'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'route'</span><span class="token punctuation">,</span> navigationStrategy<span class="token punctuation">:</span> navStrat <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> navStrat <span class="token operator">=</span> <span class="token punctuation">(</span>instruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          instruction<span class="token punctuation">.</span>config<span class="token punctuation">.</span>moduleId <span class="token operator">=</span> instruction<span class="token punctuation">.</span>fragment
          instruction<span class="token punctuation">.</span>config<span class="token punctuation">.</span>href <span class="token operator">=</span> instruction<span class="token punctuation">.</span>fragment
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'admin*path'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'route'</span><span class="token punctuation">,</span> navigationStrategy<span class="token punctuation">:</span> navStrat <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="adding-additional-data-to-a-route">Adding Additional Data To A Route</h2><p>Although Aurelia does allow you to pass any additional property to a route's configuration object, <code>settings</code> is the default parameter to which you should add arbitrary data that you want to pass to the route.</p>
<code-listing heading="Using Route Settings">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span><span class="token punctuation">,</span> settings<span class="token punctuation">:</span> <span class="token punctuation">{</span>data<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span><span class="token punctuation">,</span> settings<span class="token punctuation">:</span> <span class="token punctuation">{</span>data<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="case-sensitive-routes">Case Sensitive Routes</h2><p>You can set a route to be case sensitive, should you wish:</p>
<code-listing heading="Making a Route Case-Sensitive">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span><span class="token punctuation">,</span> caseSensitive<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span><span class="token punctuation">,</span> caseSensitive<span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>In the above example, our route will only match URL fragment of <code>/users</code> and not <code>/Users</code>, <em>but</em> since the route <code>home</code> is not case sensitive the URL <code>/Home</code> would match. By default Aurelia's routes are not case sensitive.</p>
</section>
<section><h2 id="handling-unknown-routes">Handling Unknown Routes</h2><p>Aurelia allows you to map any unknown routes. Parameters passed to <code>mapUnknownRoutes()</code> can be:</p>
<ul>
<li>A string to a moduleId. This module will be navigated to any time a route is not found.</li>
<li>A routeConfig object. This configuration object will be used any time a route is not found.</li>
<li>A function which is passed the NavigationInstruction object and can decide the route dynamically.</li>
</ul>
<h3>Using a <code>moduleId</code> for Unknown Routes</h3>
<code-listing heading="Static Unknown Routes">
  <source-code><pre class="language-typescript"><code>
  <span class="token operator">&lt;</span>source<span class="token operator">-</span>code lang<span class="token operator">=</span><span class="token string">"ES 2015/2016"</span><span class="token operator">></span>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">mapUnknownRoutes</span><span class="token punctuation">(</span><span class="token string">'not-found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">mapUnknownRoutes</span><span class="token punctuation">(</span><span class="token string">'not-found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>The above example will make any unmatched routes to load the <code>not-found</code> component module.</p>
<h3>Using A Function For Unknown Routes</h3>
<p>The function passed to <code>mapUnknownRoutes()</code> has to return:</p>
<ul>
<li>A string representing <code>moduleId</code>.</li>
<li>An object with property <code>moduleId</code> of type string.</li>
<li>A <code>RouteConfig</code> object.</li>
<li>A <code>Promise</code> that resolves to any of the above.</li>
</ul>
<code-listing heading="Dynamic Unknown Routes">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> handleUnknownRoutes <span class="token operator">=</span> <span class="token punctuation">(</span>instruction<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'not-found'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        config<span class="token punctuation">.</span><span class="token function">mapUnknownRoutes</span><span class="token punctuation">(</span>handleUnknownRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">,</span> Router<span class="token punctuation">,</span> RouteConfig<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> handleUnknownRoutes <span class="token operator">=</span> <span class="token punctuation">(</span>instruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">)</span><span class="token punctuation">:</span> RouteConfig <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'not-found'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        config<span class="token punctuation">.</span><span class="token function">mapUnknownRoutes</span><span class="token punctuation">(</span>handleUnknownRoutes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="redirecting-routes">Redirecting Routes</h2><p>Aurelia allows redirecting of routes to URL fragments by specifying redirect with a string consisting of a URL fragment.</p>
<code-listing heading="Route Config Redirects">
  <source-code lang="ES 2015/ES 2016/TypeScript"><pre class="language-javascript"><code>
    config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> redirect<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  </code></pre></source-code>
</code-listing>
<div class="info"><div class="icon"> <i></i> </div><h4>Use Redirect On Empty Routes with Child Routers</h4><p>
The <code>redirect</code> is particularly useful when you have an &quot;empty&quot; route pattern (such as the first route above) that maps to a component with a child router. In this case, create a non-empty route and then redirect the empty route to the non-empty route (as above). This will enable the child router to consistently match child routes without getting confused in scenarios where the empty route was matched.</p>
</div>
</section>
<section><h2 id="pipelines">Pipelines</h2><p>Aurelia has two router classes, <code>AppRouter</code> and <code>Router</code>. <code>AppRouter</code> extends the <code>Router</code> class and is the main application router. <code>Router</code> is used for any child routers including nested child routers. One of the main differences between the two is pipelines are only allowed on the <code>AppRouter</code> and not any child routers.</p>
<p>The default pipeline slots in order are <code>authorize</code>, <code>preActivate</code>, <code>preRender</code>, and <code>postRender</code>. For each slot, Aurelia has convenience functions for creating a pipeline step for these slots: <code>addAuthorizeStep</code>, <code>addPreActivateStep</code>, <code>addPreRenderStep</code>, <code>addPostRenderStep</code>. You can create your own pipeline steps using <code>addPipelineStep</code>, but the step's name must match one of the default pipeline's slots.</p>
<ul>
<li><code>authorize</code> is called between loading the route's step and calling the route view-model' <code>canActivate</code> function if defined.</li>
<li><code>preActivate</code> is called between the route view-model' <code>canActivate</code> function and the previous route view-model's <code>deactivate</code> function if defined.</li>
<li><code>preRender</code> is called between the route view-model's activate function and before the component is rendered/composed.</li>
<li><code>postRender</code> is called after the component has been render/composed.</li>
</ul>
<p>A pipeline step must be an object that contains a <code>run(navigationInstruction, next)</code> function.</p>
<code-listing heading="An Authorize Step">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">addAuthorizeStep</span><span class="token punctuation">(</span>AuthorizeStep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>       moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span>  settings<span class="token punctuation">:</span> <span class="token punctuation">{</span> auth<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users/:id/detail'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'userDetail'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/detail'</span><span class="token punctuation">,</span> settings<span class="token punctuation">:</span> <span class="token punctuation">{</span> auth<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">AuthorizeStep</span> <span class="token punctuation">{</span>
      <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">.</span><span class="token function">getAllInstructions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token operator">></span> i<span class="token punctuation">.</span>config<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> isLoggedIn <span class="token operator">=</span> <span class="token comment" spellcheck="true">// insert magic here;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> next<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Redirect</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">,</span> Next<span class="token punctuation">,</span> Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">addAuthorizeStep</span><span class="token punctuation">(</span>AuthorizeStep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>       moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span>  settings<span class="token punctuation">:</span> <span class="token punctuation">{</span> auth<span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users/:id/detail'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'userDetail'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/detail'</span><span class="token punctuation">,</span> settings<span class="token punctuation">:</span> <span class="token punctuation">{</span> auth<span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">AuthorizeStep</span> <span class="token punctuation">{</span>
      <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">:</span> Next<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">.</span><span class="token function">getAllInstructions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token operator">></span> i<span class="token punctuation">.</span>config<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>auth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> isLoggedIn <span class="token operator">=</span> <span class="token comment" spellcheck="true">//insert magic here;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> next<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Redirect</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="A PreActivate Step">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> step<span class="token punctuation">.</span>run<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        step<span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPreActivateStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">,</span> Next<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> step<span class="token punctuation">.</span>run<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        step<span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">:</span> Next<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPreActivateStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="A PreRender Step">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPreRenderStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">,</span> Next<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">:</span> Next<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPreRenderStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="A PostRender Step">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPostRenderStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> NavigationInstruction<span class="token punctuation">,</span> Next<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token function">run</span><span class="token punctuation">(</span>navigationInstruction<span class="token punctuation">:</span> NavigationInstruction<span class="token punctuation">,</span> next<span class="token punctuation">:</span> Next<span class="token punctuation">)</span><span class="token punctuation">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">addPostRenderStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="rendering-view-ports">Rendering View Ports</h2><p>Every instance of a <code>router-view</code> custom element essentially defines a &quot;view port&quot;. When you give a <code>router-view</code> a name, you can refer to it in the <code>viewPorts</code> property of the route configuration in your javascript. The value of a <code>viewPorts</code> property is an object where each property name is the name of a view port (ie, <code>router-view</code>) and each value is the <code>moduleId</code> destination of the route. Thus you can specify any number of view ports on a single route configuration.</p>
<div class="info"><div class="icon"> <i></i> </div><p>
If you don't name a <code>router-view</code>, it will be available under the name 'default'.</p>
</div>
<p>Following is an example of the use of view ports:</p>
<code-listing heading="app.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/detail'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/detail'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<h3>Empty View Ports</h3>
<p>You can empty a view port by setting <code>moduleId</code> null in the route configuration for that view port.</p>
<code-listing>
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<h3>View Port Defaults</h3>
<p>The empty view port is actually the out-of-the-box default. You can override this default to load a specific <code>moduleId</code> whenever <code>moduleId</code> is null by passing a view port configuration to the router configuration. These overrides can be set specifically to each view port.</p>
<code-listing>
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useViewPortDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'pages/placeholder'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useViewPortDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'pages/placeholder'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<h3>Optional View Ports</h3>
<p>If a view port configuration is not defined on a route, the router will skip routing on that particular view port leaving the view port untouched. If there is no existing content in the view port, i.e. when the application is first loaded, the view port will be populated with the view port default configuration, which is empty if not otherwise specified (see View Port Defaults).</p>
<code-listing>
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useViewPortDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'pages/placeholder'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'user/list'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">useViewPortDefaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          right<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'pages/placeholder'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<div class="info"><div class="icon"> <i></i> </div><p>
In addition to the <code>moduleId</code>, you can also specify a &quot;layout&quot; in the configuration of a view port (see 
<a href="aurelia-doc://section/10/version/1.0.0" target="_blank">Layouts</a>
).</p>
</div>
</section>
<section><h2 id="layouts">Layouts</h2><p>Similar to MVC-style master/layout pages, Aurelia allows you to use a &quot;layout&quot; view like an MVC &quot;master template&quot; for a set of views.</p>
<p>The set of views subject to being part of a layout is defined in Aurelia as a set of views referenced by one or more routes in a router configuration. There are two ways to associate a layout with routes. The first is via HTML, the second is via view model code.</p>
<div class="info"><div class="icon"> <i></i> </div><p>
We're going to be a little sloppy here in terminology. Technically, routes refer to &quot;moduleIds&quot;, not
&quot;views&quot;. Since the router resolves a <code>moduleId</code> to a view, indirectly the router does reference a view. It is easy to picture a view visually contained within a layout, so in this topic to we'll refer to views referenced by a route, not modules.</p>
</div>
<p>We'll look at using HTML first. We know that the <code>router-view</code> custom HTML element is always associated with a set of one or more views referenced in a router configuration given in its parent view's view model. By associating a layout with a <code>router-view</code> one can thus associate a layout with the same set of views with which the <code>router-view</code> is associated.</p>
<p>To specify a layout on the <code>router-view</code> custom element, we use the following attributes:</p>
<ul>
<li><code>layout-view</code> - specifies the file name (with path) of the layout view to use.</li>
<li><code>layout-view-model</code> - specifies the moduleId of the view model to use with the layout view.</li>
<li><code>layout-model</code> - specifies the model parameter to pass to the layout view model's <code>activate</code> function.</li>
</ul>
<div class="info"><div class="icon"> <i></i> </div><p>
All of these layout attributes are bindable.</p>
</div>
<p>Following is an example of HTML in which we specify that we want all destination views reachable under the <code>router-view</code> to be laid-out inside a view with file name <code>layout.html</code>, located in the same directory as the view contianing the <code>router-view</code>:</p>
<code-listing heading="app.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">layout-view</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<p>Here is the layout view itself:</p>
<code-listing heading="layout.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<p>And here we define a view that we want to appear within the layout:</p>
<code-listing heading="home.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>${leftMessage}.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right-content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>${rightMessage}.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>This will not be displayed in the layout because it is not contained in any named slot referenced by the layout.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="home${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>leftMessage <span class="token operator">=</span> <span class="token string">"I'm content that will show up on the left"</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rightMessage <span class="token operator">=</span> <span class="token string">"I'm content that will show up on the right"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
      leftMessage<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>
      rightMessage<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>

      <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>leftMessage <span class="token operator">=</span> <span class="token string">"I'm content that will show up on the left"</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rightMessage <span class="token operator">=</span> <span class="token string">"I'm content that will show up on the right"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>Observe how we use the <code>slot</code> mechanism for associating parts of the layout to parts of the views that are to be contained within the layout. (Happy for developers, this is conveniently the same mechanism and syntax we use in Aurelia when providing content to custom elements.)</p>
<p>Now we just have to define the route configuration that will be associated with the <code>router-view</code>:</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>Thus when we navigate to the module &quot;home&quot; we find that it is laid-out as desired inside the layout view.</p>
<p>Note there is nothing different about the above route configuration with or without the layout.  It may reference any number of views that would all be included by default in the layout.</p>
<p>So that is how we use HTML to associate a layout view with a set of views referenced in a router configuration.</p>
<p>We can also associate layouts with route configurations using code in our view model. Suppose we like what we've done above, but we have a couple views that we would like to associate with a different layout and would thus like to partially override the configuration given in the HTML. The following code is an example of how we can do that:</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'login/index'</span><span class="token punctuation">,</span> layoutView<span class="token punctuation">:</span> <span class="token string">'layout-login.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> layoutModel<span class="token punctuation">:</span> <span class="token string">'layout-users'</span><span class="token punctuation">,</span> layoutViewModel<span class="token punctuation">:</span> <span class="token punctuation">{</span> access<span class="token punctuation">:</span> <span class="token string">"admin"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'login/index'</span><span class="token punctuation">,</span> layoutView<span class="token punctuation">:</span> <span class="token string">'layout-login.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> layoutModel<span class="token punctuation">:</span> <span class="token string">'layout-users'</span><span class="token punctuation">,</span> layoutViewModel<span class="token punctuation">:</span> <span class="token punctuation">{</span> access<span class="token punctuation">:</span> <span class="token string">"admin"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>The above example will assign different layouts to the &quot;login&quot; and &quot;users&quot; views, overriding the HTML while leaving &quot;home&quot; to remain as configured in the HTML. Noticing we're using camel-cased property names here, unlike in the HTML.</p>
<p>You can also specify a layout in the <code>viewPorts</code> configuration of a route. See a simple example, below:</p>
<code-listing heading="app.html">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myRouterView<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> myRouterView<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> layoutView<span class="token punctuation">:</span> <span class="token string">'default.html'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> viewPorts<span class="token punctuation">:</span> <span class="token punctuation">{</span> myRouterView<span class="token punctuation">:</span> <span class="token punctuation">{</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> layoutView<span class="token punctuation">:</span> <span class="token string">'default.html'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="view-swapping-and-animation">View Swapping and Animation</h2><p>When the Aurelia router navigates from one view to another, we refer to this as &quot;swapping&quot; one view for another.  Aurelia gives us an optional set of strategies dictating how a swap proceeds, or more specifically, how animation plays out during the swap.  We refer to these strategies more precisely as the &quot;swap order&quot;.</p>
<div class="info"><div class="icon"> <i></i> </div><p>
If there is no animation defined, then swap-order has no visible impact.</p>
</div>
<p>You can apply a swap strategy to one or more routes by applying the <code>swap-order</code> attribute to a <code>router-view</code> custom HTML element.  The strategy will then be applied in any transition between two views accessible under the <code>router-view</code>.</p>
<div class="info"><div class="icon"> <i></i> </div><p>
<code>swap-order</code> is bindable.</p>
</div>
<p>The following swap order strategies are available:</p>
<ul>
<li>before - animate the next view in before removing the current view</li>
<li>with - animate the next view at the same time the current view is removed</li>
<li>after - animate the next view in after the current view has been removed (the default)</li>
</ul>
<p>Here is an example of setting the swap order strategy on a <code>router-view</code>:</p>
<code-listing heading="swap-order">
  <source-code lang="HTML"><pre class="language-markup"><code>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">swap-order</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>before<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="internationalizing-titles">Internationalizing Titles</h2><p>If your application targets multiple cultures or languages, you probably want to translate your route titles. The <code>Router</code> class has a <code>transformTitle</code> property that can be used for this. It is expected to be assigned a function that takes the active route's title as a parameter and then returns the translated title. For example, if your app uses <code>aurelia-i18n</code>, its routes' titles would typically be set to some translation keys
and the <code>AppRouter</code>'s <code>transformTitle</code> would be configured in such a way that the active route's title is translated using the <code>I18N</code>'s <code>tr</code> method. Additionally you can listen to a custom event published by the I18N service to react on locale changes using the EventAggregator:</p>
<code-listing heading="src/main${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">import</span> Backend <span class="token keyword">from</span> <span class="token string">'i18next-xhr-backend'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>AppRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>EventAggregator<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-event-aggregator'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">configure</span><span class="token punctuation">(</span>aurelia<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      aurelia<span class="token punctuation">.</span>use
        <span class="token punctuation">.</span><span class="token function">standardConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'aurelia-i18n'</span><span class="token punctuation">,</span> i18n <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          i18n<span class="token punctuation">.</span>i18next<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Backend<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> i18n<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            backend<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              loadPath<span class="token punctuation">:</span> <span class="token string">'./locales/{{lng}}.json'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            lng <span class="token punctuation">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
            fallbackLng <span class="token punctuation">:</span> <span class="token string">'en'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> router <span class="token operator">=</span> aurelia<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>AppRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            router<span class="token punctuation">.</span>transformTitle <span class="token operator">=</span> title <span class="token operator">=</span><span class="token operator">></span> i18n<span class="token punctuation">.</span><span class="token function">tr</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> eventAggregator <span class="token operator">=</span> aurelia<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>EventAggregator<span class="token punctuation">)</span><span class="token punctuation">;</span>
            eventAggregator<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'i18n:locale:changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
              router<span class="token punctuation">.</span><span class="token function">updateTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      aurelia<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> aurelia<span class="token punctuation">.</span><span class="token function">setRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> Backend <span class="token keyword">from</span> <span class="token string">'i18next-xhr-backend'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>Aurelia<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-framework'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>AppRouter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>EventAggregator<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-event-aggregator'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">configure</span><span class="token punctuation">(</span>aurelia<span class="token punctuation">:</span> Aurelia<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      aurelia<span class="token punctuation">.</span>use
        <span class="token punctuation">.</span><span class="token function">standardConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'aurelia-i18n'</span><span class="token punctuation">,</span> i18n <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          i18n<span class="token punctuation">.</span>i18next<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Backend<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> i18n<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            backend<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              loadPath<span class="token punctuation">:</span> <span class="token string">'./locales/{{lng}}.json'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            lng <span class="token punctuation">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
            fallbackLng <span class="token punctuation">:</span> <span class="token string">'en'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> router <span class="token operator">=</span> aurelia<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>AppRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            router<span class="token punctuation">.</span>transformTitle <span class="token operator">=</span> title <span class="token operator">=</span><span class="token operator">></span> i18n<span class="token punctuation">.</span><span class="token function">tr</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> eventAggregator <span class="token operator">=</span> aurelia<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>EventAggregator<span class="token punctuation">)</span><span class="token punctuation">;</span>
            eventAggregator<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'i18n:locale:changed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
              router<span class="token punctuation">.</span><span class="token function">updateTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      aurelia<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> aurelia<span class="token punctuation">.</span><span class="token function">setRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="locales/en.json">
  <source-code lang="JSON"><pre class="language-javascript"><code>
    <span class="token punctuation">{</span>
      <span class="token string">"titles"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"app"</span><span class="token punctuation">:</span> <span class="token string">"My App"</span><span class="token punctuation">,</span>
        <span class="token string">"home"</span><span class="token punctuation">:</span> <span class="token string">"Home"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<code-listing heading="src/app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'titles.app'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'titles.home'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'titles.app'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'titles.home'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<p>The default value of the<code>transformTitle</code> property does the following:</p>
<ul>
<li>For the child <code>Router</code>, it delegates to its parent's <code>transformTitle</code> function.</li>
<li>For the <code>AppRouter</code>, it returns the title untransformed.</li>
</ul>
<p>In the previous example, the <code>AppRouter</code>'s <code>transformTitle</code> is set, so all child <code>Router</code>s will delegate down to it by default. However, this means that the <code>transformTitle</code> can be overridden for specific child <code>Router</code>s if some areas of your app need custom transformation.</p>
</section>
<section><h2 id="configuring-a-fallback-route">Configuring a Fallback Route</h2><p>Whenever navigation is rejected, it is redirected to a previous location. However in certain cases a previous location doesn't exist, e.g. when it happens as the first navigation after the startup of application. To handle this scenario, you can set up a fallback route.</p>
<code-listing heading="app${context.language.fileExtension}">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">fallbackRoute</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">:</span> Router<span class="token punctuation">;</span>

      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">,</span> router<span class="token punctuation">:</span> Router<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router <span class="token operator">=</span> router<span class="token punctuation">;</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>  moduleId<span class="token punctuation">:</span> <span class="token string">'home/index'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span>      name<span class="token punctuation">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> moduleId<span class="token punctuation">:</span> <span class="token string">'users/index'</span><span class="token punctuation">,</span> nav<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Users'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        config<span class="token punctuation">.</span><span class="token function">fallbackRoute</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
</section>
<section><h2 id="reusing-an-existing-view-model">Reusing an Existing View Model</h2><p>Since the view model's navigation lifecycle is called only once, you may have problems recognizing that the user switched the route from <code>Product A</code> to <code>Product B</code> (see below). To work around this issue implement the method <code>determineActivationStrategy</code> in your view model and return hints for the router about what you'd like to happen. Available return values are <code>replace</code> and <code>invoke-lifecycle</code>. Remember, &quot;lifecycle&quot; refers to the navigation lifecycle.</p>
<code-listing heading="Router View Model Activation Control">
  <source-code lang="ES 2015/2016"><pre class="language-javascript"><code>
    <span class="token comment" spellcheck="true">//app.js</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'product/a'</span><span class="token punctuation">,</span>    moduleId<span class="token punctuation">:</span> <span class="token string">'product'</span><span class="token punctuation">,</span>     nav<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'product/b'</span><span class="token punctuation">,</span>    moduleId<span class="token punctuation">:</span> <span class="token string">'product'</span><span class="token punctuation">,</span>     nav<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//product.js</span>

    <span class="token keyword">import</span> <span class="token punctuation">{</span>activationStrategy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
      <span class="token function">determineActivationStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> activationStrategy<span class="token punctuation">.</span>replace<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
  <source-code lang="TypeScript"><pre class="language-typescript"><code>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>RouterConfiguration<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//app.ts</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
      <span class="token function">configureRouter</span><span class="token punctuation">(</span>config<span class="token punctuation">:</span> RouterConfiguration<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        config<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Aurelia'</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'product/a'</span><span class="token punctuation">,</span>    moduleId<span class="token punctuation">:</span> <span class="token string">'product'</span><span class="token punctuation">,</span>     nav<span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">'product/b'</span><span class="token punctuation">,</span>    moduleId<span class="token punctuation">:</span> <span class="token string">'product'</span><span class="token punctuation">,</span>     nav<span class="token punctuation">:</span> <span class="token keyword">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//product.ts</span>

    <span class="token keyword">import</span> <span class="token punctuation">{</span>activationStrategy<span class="token punctuation">,</span> RoutableComponentDetermineActivationStrategy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'aurelia-router'</span><span class="token punctuation">;</span>

    <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">RoutableComponentDetermineActivationStrategy</span> <span class="token punctuation">{</span>
      <span class="token function">determineActivationStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> activationStrategy<span class="token punctuation">.</span>replace<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  </code></pre></source-code>
</code-listing>
<div class="info"><div class="icon"> <i></i> </div><p>
Alternatively, if the strategy is always the same and you don't want that to be in your view model code, you can add the <code>activationStrategy</code> property to your route config instead.</p>
</div>
</section>

  </article>
</section>
