{"name":"ag-Grid - The Enterprise Datagrid For Aurelia","description":"Please let me introduce Sean Landsman, a developer on ag-Grid to share what he's been working on. Sean, take it away...","author":{"name":"AureliaEffect"},"links":{"static":"blog/2016/12/4/ag-grid-the-enterprise-datagrid-for-aurelia","html":"blog/2016/12/4/ag-grid-the-enterprise-datagrid-for-aurelia/index.html","fragment":"blog/2016/12/4/ag-grid-the-enterprise-datagrid-for-aurelia/index-fragment.html","self":"blog/2016/12/4/ag-grid-the-enterprise-datagrid-for-aurelia/index.json"},"content":"\nPlease let me introduce Sean Landsman, a developer on ag-Grid to share what he's been working on. Sean, take it away...\n\n---\n\nHere at ag-Grid, we are very excited to be able to offer support for Aurelia! Aurelia is a powerful and flexible framework that makes developing applications a breeze.\n\nIn this post, I won't be documenting how to use Aurelia in ag-Grid but rather on how we added support for Aurelia within the grid itself. For details on how to use Aurelia in ag-Grid, take a look at the [ag-Grid Aurelia](https://ag-grid.com/best-aurelia-data-grid/) documentation.\n\n## AgGridAurelia\n\nFollowing the model used by our Angular 2 offering, we created a new Custom Component that wraps ag-Grid, passing events & properties back and forth between the Custom Component and the grid. Doing this keeps ag-Grid framework agnostic, a core design principle here at ag-Grid.\n\n`AgGridAurelia` is the main Custom Component for Aurelia - it handles all core grid events and properties, as well as initial instantiation and removal.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    @customElement('ag-grid-aurelia')\n    @inlineView(`<template><slot></slot></template>`)\n    @autoinject()\n    export class AgGridAurelia implements ComponentAttached, ComponentDetached {\n      ...\n    }\n  </source-code>\n</code-listing>\n\nThe grid definition (which we'll get to in a minute) consists of the parent selector (`ag-grid-aurelia`) and a number of child `ag-grid-column`'s.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    @children('ag-grid-column')\n    public columns: AgGridColumn[] = [];\n  </source-code>\n</code-listing>\n\nDuring the creation and initialisation phases, we dynamically create all available grid events, set all provided gridOptions, map supplied column definitions to colDefs and finally instantiate ag-Grid itself:\n\n##### Create all available grid events.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    ComponentUtil.EVENTS.forEach((eventName) => {\n        //create an empty event\n        (<any>this)[eventName] = () => {\n        };\n    });\n  </source-code>\n</code-listing>\n\n##### Copy supplied properties to gridOptions.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    this.gridOptions = ComponentUtil.copyAttributesToGridOptions(this.gridOptions, this);\n    this.gridParams = {\n        globalEventListener: this.globalEventListener.bind(this),\n        frameworkFactory: this.auFrameworkFactory\n    };\n  </source-code>\n</code-listing>\n\n##### Map supplied column definitions to expected colDefs.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    if (this.columns && this.columns.length > 0) {\n        this.gridOptions.columnDefs = this.columns\n            .map((column: AgGridColumn) => {\n                return column.toColDef();\n            });\n    }\n  </source-code>\n</code-listing>\n\n##### Instantiate ag-Grid with the supplied configuration.\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    new Grid(this._nativeElement, this.gridOptions, this.gridParams);\n  </source-code>\n</code-listing>\n\n> Note: This is an abridged version of what actually happens, for brevity's sake.\n\n#### Mapping Columns to Template Types\n\nEach type of column is defined by a selector and then converted to a colDef that the grid understands. This is done in `AgGridColumn`:\n\n\n<code-listing>\n  <source-code lang=\"JavaScript\">\n    @autoinject()\n    export class AgGridColumn {\n        @children('ag-grid-column')\n        public childColumns:AgGridColumn[] = [];\n    \n        @child('ag-cell-template')\n        public cellTemplate:AgCellTemplate;\n    \n        @child('ag-editor-template')\n        public editorTemplate:AgEditorTemplate;\n        ...\n    \n        public toColDef():ColDef {\n            let colDef:ColDef = this.createColDefFromGridColumn();\n    \n            if (this.hasChildColumns()) {\n                (<any>colDef)[\"children\"] = this.getChildColDefs(this.childColumns);\n            }\n    \n            if (this.cellTemplate) {\n                colDef.cellRendererFramework = {template: this.cellTemplate.template};\n                delete (<any>colDef).cellTemplate;\n            }\n    \n            if (this.editorTemplate) {\n                colDef.editable = true;\n                colDef.cellEditorFramework = {template: this.editorTemplate.template};\n                delete (<any>colDef).editorTemplate;\n            }\n            ...\n    }\n  </source-code>\n</code-listing>\n\nFor example, if we defined a column as follows...\n\n\n<code-listing>\n  <source-code lang=\"HTML\">\n    <ag-grid-column header-name=\"Mood\" field=\"mood\" width.bind=\"250\" editable.bind=\"true\">\n        <ag-cell-template>\n          <img width=\"20px\" if.bind=\"params.value === 'Happy'\" src=\"images/smiley.png\"/>\n          <img width=\"20px\" if.bind=\"params.value !== 'Happy'\" src=\"images/smiley-sad.png\"/>\n        </ag-cell-template>\n        <ag-editor-template>\n          <ag-mood-editor>\n        </ag-editor-template>\n    </ag-grid-column>\n  </source-code>\n</code-listing>\n\n...this would be mapped to a column with a defined cellRenderer and cellEditor.\n\nThat's pretty much it! Give it a go - Aurelia is a fun framework and now you can use it with the best Enterprise Data Grid around! Take a look at our [live examples site](https://ceolter.github.io/ag-grid-aurelia-example/#/rich-grid). Feedback is always welcome!\n\n### About Sean Landsman\n\nI'm an experienced full stack technical lead with an extensive background in enterprise solutions. Over 19 years in the industry has taught me the value of quality code and good team collaboration. The bulk of my background is on the server side, but I am increasingly switching focus to include front end technologies. Currently, I work on ag-Grid full time."}